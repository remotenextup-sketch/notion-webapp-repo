<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Notion × Toggl Timer</title>
  <style>
    body { font-family: sans-serif; padding: 16px; }
    .hidden { display: none; }
    .btn { padding: 6px 12px; cursor: pointer; }
    .btn-green { background: #4caf50; color: #fff; }
    .btn-gray { background: #ccc; }
    .tab { display: flex; margin: 12px 0; }
    .tab button { flex: 1; padding: 10px; }
    .tab .active { background: #2979ff; color: #fff; }
    ul { list-style: none; padding: 0; }
    li { margin-bottom: 8px; }
    label { display: block; margin-top: 8px; }
  </style>
</head>

<body>

<h1>Notion × Toggl Timer</h1>
<button id="toggleSettings" class="btn btn-gray">設定</button>

<!-- ================= 設定 ================= -->
<div id="settingsView" class="hidden">
  <h2>設定</h2>

  <label>Notion API Token</label>
  <input id="confNotionToken" />

  <label>Notion User ID（任意）</label>
  <input id="confNotionUserId" />

  <label>Notion データベース</label>
  <div id="dbConfigContainer"></div>
  <button id="addDbConfig" class="btn btn-gray">DB追加</button>

  <label>Toggl API Token</label>
  <input id="confTogglToken" />

  <label>Toggl Workspace ID</label>
  <input id="confTogglWid" />

  <br><br>
  <button id="saveConfig" class="btn btn-green">保存</button>
  <button id="cancelConfig" class="btn btn-gray">閉じる</button>
</div>

<!-- ================= メイン ================= -->
<div id="mainView">

  <select id="taskDbFilter"></select>
  <button id="reloadTasks" class="btn btn-gray">再読込</button>

  <div class="tab">
    <button id="startExistingTask" class="active" data-target="existing">既存タスク</button>
    <button id="startNewTask" data-target="new">新規タスク</button>
  </div>

  <!-- 既存 -->
  <div id="existingTaskTab">
    <div id="taskListContainer"></div>
  </div>

  <!-- 新規 -->
  <div id="newTaskTab" class="hidden">
    <label>タスク名（必須）</label>
    <input id="newTaskTitle" />

    <div id="newCatContainer"></div>
    <div id="newDeptContainer"></div>

    <button id="startNewTaskButton" class="btn btn-green">開始</button>
  </div>
</div>

<!-- ================= 実行中 ================= -->
<div id="runningTaskContainer" class="hidden">
  <h3 id="runningTaskTitle"></h3>
  <div id="runningTimer">00:00:00</div>

  <label>思考ログ</label>
  <textarea id="thinkingLogInput"></textarea>

  <br>
  <button id="stopTaskButton" class="btn btn-gray">停止</button>
  <button id="completeTaskButton" class="btn btn-green">完了</button>
</div>

<script src="app.js"></script>
</body>
</html>
